service: resetSession
frameworkVersion: '2'

plugins:
  - serverless-plugin-typescript
  - serverless-offline

provider:
  name: aws
  runtime: nodejs14.x
  lambdaHashingVersion: 20201221
  region: 'us-east-2'
  stage: ${opt:stage, 'development'}
  environment:
      STAGE: ${opt:stage, 'development'}
      KEYDEV: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdhbml6YXRpb25JZCI6ImY3ODM2NGJlLTc5Y2UtNDA2MS05OWZkLWNmMDExN2RmYTA2OCIsInVzZXIiOnsiZW1haWwiOiJwZWRyby52aXZhbGRpQHdhdnkuZ2xvYmFsIiwic3ViIjoiMjg4NzE4OTItYjAxMS00ODJjLWJhNjgtODRmOGVlOTM5YTlhIiwiZ3JvdXBJZHMiOlsiOGZhMGU3MGMtZTcwMC00MTcwLWFhZDQtMGMxZDFmOTQ1OTAzIiwiZjc4MzY0YmUtNzljZS00MDYxLTk5ZmQtY2YwMTE3ZGZhMDY4Il0sInJvbGVzIjpbIm9yZ2FuaXphdGlvbi5hZG1pbiIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sImNyZWF0ZWRBdCI6MTU5ODk5MzI3ODY0NywiaWF0IjoxNTk4OTkzMjc4fQ.QF7MdwA6wrky8t6QvqUqQBkZtbaBsuoWgVZSfDVLffc'
  apiKeys:
      - ${opt:stage, 'development'}-${self:service}-key

functions:
  resetSession:
    handler: index.handler
    memorySize: 128
    timeout: 30
    vpc:
      securityGroupIds:
        - sg-03f5b485d7cb35d38
      subnetIds:
        - subnet-0a951cac6805bd176
        - subnet-001de5ecd3df6ae3d
    package:
      exclude:
        - '**/**.**'
      include:
        - .build/**
    description: Reset session
    events:
      - http:
          path: /resetSession
          method: POST
          cors: true
